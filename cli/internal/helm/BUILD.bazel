load("@io_bazel_rules_go//go:def.bzl", "go_library")
load("//bazel/go:go_test.bzl", "go_test")

go_library(
    name = "helm",
    srcs = [
        "backup.go",
        "client.go",
        "helm.go",
        "installer.go",
        "loader.go",
        "symwalk.go",
        "values.go",
    ],
    embedsrcs = [
        "charts/cert-manager/Chart.yaml",
        "charts/cert-manager/templates/NOTES.txt",
        "charts/cert-manager/templates/_helpers.tpl",
        "charts/cert-manager/templates/cainjector-deployment.yaml",
        "charts/cert-manager/templates/cainjector-psp-clusterrole.yaml",
        "charts/cert-manager/templates/cainjector-psp-clusterrolebinding.yaml",
        "charts/cert-manager/templates/cainjector-psp.yaml",
        "charts/cert-manager/templates/cainjector-rbac.yaml",
        "charts/cert-manager/templates/cainjector-serviceaccount.yaml",
        "charts/cert-manager/templates/crds.yaml",
        "charts/cert-manager/templates/deployment.yaml",
        "charts/cert-manager/templates/networkpolicy-egress.yaml",
        "charts/cert-manager/templates/networkpolicy-webhooks.yaml",
        "charts/cert-manager/templates/psp-clusterrole.yaml",
        "charts/cert-manager/templates/psp-clusterrolebinding.yaml",
        "charts/cert-manager/templates/psp.yaml",
        "charts/cert-manager/templates/rbac.yaml",
        "charts/cert-manager/templates/service.yaml",
        "charts/cert-manager/templates/serviceaccount.yaml",
        "charts/cert-manager/templates/servicemonitor.yaml",
        "charts/cert-manager/templates/startupapicheck-job.yaml",
        "charts/cert-manager/templates/startupapicheck-psp-clusterrole.yaml",
        "charts/cert-manager/templates/startupapicheck-psp-clusterrolebinding.yaml",
        "charts/cert-manager/templates/startupapicheck-psp.yaml",
        "charts/cert-manager/templates/startupapicheck-rbac.yaml",
        "charts/cert-manager/templates/startupapicheck-serviceaccount.yaml",
        "charts/cert-manager/templates/webhook-config.yaml",
        "charts/cert-manager/templates/webhook-deployment.yaml",
        "charts/cert-manager/templates/webhook-mutating-webhook.yaml",
        "charts/cert-manager/templates/webhook-psp-clusterrole.yaml",
        "charts/cert-manager/templates/webhook-psp-clusterrolebinding.yaml",
        "charts/cert-manager/templates/webhook-psp.yaml",
        "charts/cert-manager/templates/webhook-rbac.yaml",
        "charts/cert-manager/templates/webhook-service.yaml",
        "charts/cert-manager/templates/webhook-serviceaccount.yaml",
        "charts/cert-manager/templates/webhook-validating-webhook.yaml",
        "charts/cert-manager/values.yaml",
        "charts/cilium/.helmignore",
        "charts/cilium/Chart.yaml",
        "charts/cilium/LICENSE",
        "charts/cilium/README.md",
        "charts/cilium/README.md.gotmpl",
        "charts/cilium/files/nodeinit/poststart-eni.bash",
        "charts/cilium/files/nodeinit/prestop.bash",
        "charts/cilium/files/nodeinit/startup.bash",
        "charts/cilium/templates/NOTES.txt",
        "charts/cilium/templates/_helpers.tpl",
        "charts/cilium/templates/cilium-agent/clusterrole.yaml",
        "charts/cilium/templates/cilium-agent/clusterrolebinding.yaml",
        "charts/cilium/templates/cilium-agent/daemonset.yaml",
        "charts/cilium/templates/cilium-agent/role.yaml",
        "charts/cilium/templates/cilium-agent/rolebinding.yaml",
        "charts/cilium/templates/cilium-agent/service.yaml",
        "charts/cilium/templates/cilium-agent/serviceaccount.yaml",
        "charts/cilium/templates/cilium-agent/servicemonitor.yaml",
        "charts/cilium/templates/cilium-ca-secret.yaml",
        "charts/cilium/templates/cilium-configmap.yaml",
        "charts/cilium/templates/cilium-ingress-class.yaml",
        "charts/cilium/templates/cilium-nodeinit/daemonset.yaml",
        "charts/cilium/templates/cilium-operator/_helpers.tpl",
        "charts/cilium/templates/cilium-operator/clusterrole.yaml",
        "charts/cilium/templates/cilium-operator/clusterrolebinding.yaml",
        "charts/cilium/templates/cilium-operator/deployment.yaml",
        "charts/cilium/templates/cilium-operator/poddisruptionbudget.yaml",
        "charts/cilium/templates/cilium-operator/role.yaml",
        "charts/cilium/templates/cilium-operator/rolebinding.yaml",
        "charts/cilium/templates/cilium-operator/secret.yaml",
        "charts/cilium/templates/cilium-operator/service.yaml",
        "charts/cilium/templates/cilium-operator/serviceaccount.yaml",
        "charts/cilium/templates/cilium-operator/servicemonitor.yaml",
        "charts/cilium/templates/cilium-preflight/clusterrole.yaml",
        "charts/cilium/templates/cilium-preflight/clusterrolebinding.yaml",
        "charts/cilium/templates/cilium-preflight/daemonset.yaml",
        "charts/cilium/templates/cilium-preflight/deployment.yaml",
        "charts/cilium/templates/cilium-preflight/poddisruptionbudget.yaml",
        "charts/cilium/templates/cilium-preflight/serviceaccount.yaml",
        "charts/cilium/templates/cilium-resource-quota.yaml",
        "charts/cilium/templates/cilium-secrets-namespace.yaml",
        "charts/cilium/templates/clustermesh-apiserver/clusterrole.yaml",
        "charts/cilium/templates/clustermesh-apiserver/clusterrolebinding.yaml",
        "charts/cilium/templates/clustermesh-apiserver/deployment.yaml",
        "charts/cilium/templates/clustermesh-apiserver/poddisruptionbudget.yaml",
        "charts/cilium/templates/clustermesh-apiserver/service.yaml",
        "charts/cilium/templates/clustermesh-apiserver/serviceaccount.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-certmanager/_helpers.tpl",
        "charts/cilium/templates/clustermesh-apiserver/tls-certmanager/admin-secret.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-certmanager/client-secret.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-certmanager/clustermesh-apiserver-issuer.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-certmanager/remote-secret.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-certmanager/server-secret.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-cronjob/_job-spec.tpl",
        "charts/cilium/templates/clustermesh-apiserver/tls-cronjob/ca-secret.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-cronjob/cronjob.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-cronjob/job.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-cronjob/role.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-cronjob/rolebinding.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-cronjob/serviceaccount.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-helm/_helpers.tpl",
        "charts/cilium/templates/clustermesh-apiserver/tls-helm/admin-secret.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-helm/ca-secret.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-helm/client-secret.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-helm/remote-secret.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-helm/server-secret.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-provided/admin-secret.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-provided/ca-secret.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-provided/client-secret.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-provided/remote-secret.yaml",
        "charts/cilium/templates/clustermesh-apiserver/tls-provided/server-secret.yaml",
        "charts/cilium/templates/clustermesh-config/_helpers.tpl",
        "charts/cilium/templates/clustermesh-config/clustermesh-secret.yaml",
        "charts/cilium/templates/etcd-operator/cilium-etcd-operator-clusterrole.yaml",
        "charts/cilium/templates/etcd-operator/cilium-etcd-operator-clusterrolebinding.yaml",
        "charts/cilium/templates/etcd-operator/cilium-etcd-operator-deployment.yaml",
        "charts/cilium/templates/etcd-operator/cilium-etcd-operator-serviceaccount.yaml",
        "charts/cilium/templates/etcd-operator/etcd-operator-clusterrole.yaml",
        "charts/cilium/templates/etcd-operator/etcd-operator-clusterrolebinding.yaml",
        "charts/cilium/templates/etcd-operator/etcd-operator-serviceaccount.yaml",
        "charts/cilium/templates/etcd-operator/poddisruptionbudget.yaml",
        "charts/cilium/templates/hubble-relay/configmap.yaml",
        "charts/cilium/templates/hubble-relay/deployment.yaml",
        "charts/cilium/templates/hubble-relay/metrics-service.yaml",
        "charts/cilium/templates/hubble-relay/poddisruptionbudget.yaml",
        "charts/cilium/templates/hubble-relay/service.yaml",
        "charts/cilium/templates/hubble-relay/serviceaccount.yaml",
        "charts/cilium/templates/hubble-relay/servicemonitor.yaml",
        "charts/cilium/templates/hubble-ui/_nginx.tpl",
        "charts/cilium/templates/hubble-ui/clusterrole.yaml",
        "charts/cilium/templates/hubble-ui/clusterrolebinding.yaml",
        "charts/cilium/templates/hubble-ui/configmap.yaml",
        "charts/cilium/templates/hubble-ui/deployment.yaml",
        "charts/cilium/templates/hubble-ui/ingress.yaml",
        "charts/cilium/templates/hubble-ui/poddisruptionbudget.yaml",
        "charts/cilium/templates/hubble-ui/service.yaml",
        "charts/cilium/templates/hubble-ui/serviceaccount.yaml",
        "charts/cilium/templates/hubble/metrics-service.yaml",
        "charts/cilium/templates/hubble/peer-service.yaml",
        "charts/cilium/templates/hubble/servicemonitor.yaml",
        "charts/cilium/templates/hubble/tls-certmanager/_helpers.tpl",
        "charts/cilium/templates/hubble/tls-certmanager/hubble-issuer.yaml",
        "charts/cilium/templates/hubble/tls-certmanager/relay-client-secret.yaml",
        "charts/cilium/templates/hubble/tls-certmanager/relay-server-secret.yaml",
        "charts/cilium/templates/hubble/tls-certmanager/server-secret.yaml",
        "charts/cilium/templates/hubble/tls-certmanager/ui-client-certs.yaml",
        "charts/cilium/templates/hubble/tls-cronjob/_job-spec.tpl",
        "charts/cilium/templates/hubble/tls-cronjob/ca-secret.yaml",
        "charts/cilium/templates/hubble/tls-cronjob/clusterrole.yaml",
        "charts/cilium/templates/hubble/tls-cronjob/clusterrolebinding.yaml",
        "charts/cilium/templates/hubble/tls-cronjob/cronjob.yaml",
        "charts/cilium/templates/hubble/tls-cronjob/job.yaml",
        "charts/cilium/templates/hubble/tls-cronjob/serviceaccount.yaml",
        "charts/cilium/templates/hubble/tls-helm/_helpers.tpl",
        "charts/cilium/templates/hubble/tls-helm/ca-secret.yaml",
        "charts/cilium/templates/hubble/tls-helm/relay-client-secret.yaml",
        "charts/cilium/templates/hubble/tls-helm/relay-server-secret.yaml",
        "charts/cilium/templates/hubble/tls-helm/server-secret.yaml",
        "charts/cilium/templates/hubble/tls-helm/ui-client-certs.yaml",
        "charts/cilium/templates/hubble/tls-provided/ca-secret.yaml",
        "charts/cilium/templates/hubble/tls-provided/relay-client-secret.yaml",
        "charts/cilium/templates/hubble/tls-provided/relay-server-secret.yaml",
        "charts/cilium/templates/hubble/tls-provided/server-secret.yaml",
        "charts/cilium/templates/hubble/tls-provided/ui-client-certs.yaml",
        "charts/cilium/templates/validate.yaml",
        "charts/cilium/values.yaml",
        "charts/cilium/values.yaml.tmpl",
        "charts/edgeless/constellation-services/.helmignore",
        "charts/edgeless/constellation-services/Chart.yaml",
        "charts/edgeless/constellation-services/charts/autoscaler/.helmignore",
        "charts/edgeless/constellation-services/charts/autoscaler/Chart.yaml",
        "charts/edgeless/constellation-services/charts/autoscaler/templates/aws-deployment.yaml",
        "charts/edgeless/constellation-services/charts/autoscaler/templates/azure-deployment.yaml",
        "charts/edgeless/constellation-services/charts/autoscaler/templates/clusterrole.yaml",
        "charts/edgeless/constellation-services/charts/autoscaler/templates/clusterrolebinding.yaml",
        "charts/edgeless/constellation-services/charts/autoscaler/templates/gcp-deployment.yaml",
        "charts/edgeless/constellation-services/charts/autoscaler/templates/poddisruptionbudget.yaml",
        "charts/edgeless/constellation-services/charts/autoscaler/templates/role.yaml",
        "charts/edgeless/constellation-services/charts/autoscaler/templates/rolebinding.yaml",
        "charts/edgeless/constellation-services/charts/autoscaler/templates/service.yaml",
        "charts/edgeless/constellation-services/charts/autoscaler/templates/serviceaccount.yaml",
        "charts/edgeless/constellation-services/charts/autoscaler/values.schema.json",
        "charts/edgeless/constellation-services/charts/autoscaler/values.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/Chart.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/templates/_helpers.tpl",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/templates/crd-csi-snapshot.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/templates/csi-azuredisk-controller.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/templates/csi-azuredisk-driver.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/templates/csi-azuredisk-node.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/templates/csi-snapshot-controller.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/templates/rbac-csi-azuredisk-controller.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/templates/rbac-csi-azuredisk-node.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/templates/rbac-csi-snapshot-controller.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/templates/serviceaccount-csi-azuredisk-controller.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/templates/serviceaccount-csi-azuredisk-node.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/templates/serviceaccount-csi-snapshot-controller.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/templates/storageclass_default.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/templates/storageclass_integrity.yaml",
        "charts/edgeless/constellation-services/charts/azuredisk-csi-driver/values.yaml",
        "charts/edgeless/constellation-services/charts/ccm/.helmignore",
        "charts/edgeless/constellation-services/charts/ccm/Chart.yaml",
        "charts/edgeless/constellation-services/charts/ccm/templates/aws-daemonset.yaml",
        "charts/edgeless/constellation-services/charts/ccm/templates/azure-daemonset.yaml",
        "charts/edgeless/constellation-services/charts/ccm/templates/azure-secret.yaml",
        "charts/edgeless/constellation-services/charts/ccm/templates/clusterrolebinding.yaml",
        "charts/edgeless/constellation-services/charts/ccm/templates/gcp-cm.yaml",
        "charts/edgeless/constellation-services/charts/ccm/templates/gcp-daemonset.yaml",
        "charts/edgeless/constellation-services/charts/ccm/templates/gcp-secret.yaml",
        "charts/edgeless/constellation-services/charts/ccm/templates/serviceaccount.yaml",
        "charts/edgeless/constellation-services/charts/ccm/values.schema.json",
        "charts/edgeless/constellation-services/charts/ccm/values.yaml",
        "charts/edgeless/constellation-services/charts/cnm/.helmignore",
        "charts/edgeless/constellation-services/charts/cnm/Chart.yaml",
        "charts/edgeless/constellation-services/charts/cnm/templates/azure-daemonset.yaml",
        "charts/edgeless/constellation-services/charts/cnm/templates/clusterrole.yaml",
        "charts/edgeless/constellation-services/charts/cnm/templates/clusterrolebinding.yaml",
        "charts/edgeless/constellation-services/charts/cnm/templates/serviceaccount.yaml",
        "charts/edgeless/constellation-services/charts/cnm/values.schema.json",
        "charts/edgeless/constellation-services/charts/cnm/values.yaml",
        "charts/edgeless/constellation-services/charts/gcp-compute-persistent-disk-csi-driver/Chart.yaml",
        "charts/edgeless/constellation-services/charts/gcp-compute-persistent-disk-csi-driver/templates/cluster_setup.yaml",
        "charts/edgeless/constellation-services/charts/gcp-compute-persistent-disk-csi-driver/templates/controller.yaml",
        "charts/edgeless/constellation-services/charts/gcp-compute-persistent-disk-csi-driver/templates/node.yaml",
        "charts/edgeless/constellation-services/charts/gcp-compute-persistent-disk-csi-driver/templates/storageclass_default.yaml",
        "charts/edgeless/constellation-services/charts/gcp-compute-persistent-disk-csi-driver/templates/storageclass_integrity.yaml",
        "charts/edgeless/constellation-services/charts/gcp-compute-persistent-disk-csi-driver/templates/v1_csidriver.yaml",
        "charts/edgeless/constellation-services/charts/gcp-compute-persistent-disk-csi-driver/values.yaml",
        "charts/edgeless/constellation-services/charts/gcp-guest-agent/.helmignore",
        "charts/edgeless/constellation-services/charts/gcp-guest-agent/Chart.yaml",
        "charts/edgeless/constellation-services/charts/gcp-guest-agent/templates/daemonset.yaml",
        "charts/edgeless/constellation-services/charts/gcp-guest-agent/values.schema.json",
        "charts/edgeless/constellation-services/charts/gcp-guest-agent/values.yaml",
        "charts/edgeless/constellation-services/charts/join-service/.helmignore",
        "charts/edgeless/constellation-services/charts/join-service/Chart.yaml",
        "charts/edgeless/constellation-services/charts/join-service/templates/clusterrole.yaml",
        "charts/edgeless/constellation-services/charts/join-service/templates/clusterrolebinding.yaml",
        "charts/edgeless/constellation-services/charts/join-service/templates/configmap.yaml",
        "charts/edgeless/constellation-services/charts/join-service/templates/daemonset.yaml",
        "charts/edgeless/constellation-services/charts/join-service/templates/service.yaml",
        "charts/edgeless/constellation-services/charts/join-service/templates/serviceaccount.yaml",
        "charts/edgeless/constellation-services/charts/join-service/values.schema.json",
        "charts/edgeless/constellation-services/charts/join-service/values.yaml",
        "charts/edgeless/constellation-services/charts/key-service/.helmignore",
        "charts/edgeless/constellation-services/charts/key-service/Chart.yaml",
        "charts/edgeless/constellation-services/charts/key-service/templates/clusterrole.yaml",
        "charts/edgeless/constellation-services/charts/key-service/templates/clusterrolebinding.yaml",
        "charts/edgeless/constellation-services/charts/key-service/templates/daemonset.yaml",
        "charts/edgeless/constellation-services/charts/key-service/templates/mastersecret.yaml",
        "charts/edgeless/constellation-services/charts/key-service/templates/service.yaml",
        "charts/edgeless/constellation-services/charts/key-service/templates/serviceaccount.yaml",
        "charts/edgeless/constellation-services/charts/key-service/values.schema.json",
        "charts/edgeless/constellation-services/charts/key-service/values.yaml",
        "charts/edgeless/constellation-services/charts/konnectivity/.helmignore",
        "charts/edgeless/constellation-services/charts/konnectivity/Chart.yaml",
        "charts/edgeless/constellation-services/charts/konnectivity/templates/clusterrolebinding.yaml",
        "charts/edgeless/constellation-services/charts/konnectivity/templates/daemonset.yaml",
        "charts/edgeless/constellation-services/charts/konnectivity/templates/serviceaccount.yaml",
        "charts/edgeless/constellation-services/charts/konnectivity/values.schema.json",
        "charts/edgeless/constellation-services/charts/konnectivity/values.yaml",
        "charts/edgeless/constellation-services/charts/verification-service/.helmignore",
        "charts/edgeless/constellation-services/charts/verification-service/Chart.yaml",
        "charts/edgeless/constellation-services/charts/verification-service/templates/daemonset.yaml",
        "charts/edgeless/constellation-services/charts/verification-service/templates/loadbalancer-service.yaml",
        "charts/edgeless/constellation-services/charts/verification-service/templates/nodeport-service.yaml",
        "charts/edgeless/constellation-services/charts/verification-service/values.schema.json",
        "charts/edgeless/constellation-services/charts/verification-service/values.yaml",
        "charts/edgeless/constellation-services/templates/.gitkeep",
        "charts/edgeless/constellation-services/values.yaml",
        "charts/edgeless/operators/.helmignore",
        "charts/edgeless/operators/Chart.yaml",
        "charts/edgeless/operators/charts/constellation-operator/.helmignore",
        "charts/edgeless/operators/charts/constellation-operator/Chart.yaml",
        "charts/edgeless/operators/charts/constellation-operator/crds/autoscalingstrategy-crd.yaml",
        "charts/edgeless/operators/charts/constellation-operator/crds/joiningnode-crd.yaml",
        "charts/edgeless/operators/charts/constellation-operator/crds/nodeversion-crd.yaml",
        "charts/edgeless/operators/charts/constellation-operator/crds/pendingnode-crd.yaml",
        "charts/edgeless/operators/charts/constellation-operator/crds/scalinggroup-crd.yaml",
        "charts/edgeless/operators/charts/constellation-operator/templates/_helpers.tpl",
        "charts/edgeless/operators/charts/constellation-operator/templates/deployment.yaml",
        "charts/edgeless/operators/charts/constellation-operator/templates/leader-election-rbac.yaml",
        "charts/edgeless/operators/charts/constellation-operator/templates/manager-config.yaml",
        "charts/edgeless/operators/charts/constellation-operator/templates/manager-rbac.yaml",
        "charts/edgeless/operators/charts/constellation-operator/templates/metrics-reader-rbac.yaml",
        "charts/edgeless/operators/charts/constellation-operator/templates/metrics-service.yaml",
        "charts/edgeless/operators/charts/constellation-operator/templates/proxy-rbac.yaml",
        "charts/edgeless/operators/charts/constellation-operator/values.schema.json",
        "charts/edgeless/operators/charts/constellation-operator/values.yaml",
        "charts/edgeless/operators/charts/node-maintenance-operator/.helmignore",
        "charts/edgeless/operators/charts/node-maintenance-operator/Chart.yaml",
        "charts/edgeless/operators/charts/node-maintenance-operator/crds/nodemaintenance-crd.yaml",
        "charts/edgeless/operators/charts/node-maintenance-operator/templates/_helpers.tpl",
        "charts/edgeless/operators/charts/node-maintenance-operator/templates/deployment.yaml",
        "charts/edgeless/operators/charts/node-maintenance-operator/templates/leader-election-rbac.yaml",
        "charts/edgeless/operators/charts/node-maintenance-operator/templates/manager-rbac.yaml",
        "charts/edgeless/operators/charts/node-maintenance-operator/templates/metrics-reader-rbac.yaml",
        "charts/edgeless/operators/charts/node-maintenance-operator/templates/metrics-service.yaml",
        "charts/edgeless/operators/charts/node-maintenance-operator/templates/proxy-rbac.yaml",
        "charts/edgeless/operators/charts/node-maintenance-operator/templates/selfsigned-issuer.yaml",
        "charts/edgeless/operators/charts/node-maintenance-operator/templates/serving-cert.yaml",
        "charts/edgeless/operators/charts/node-maintenance-operator/templates/validating-webhook-configuration.yaml",
        "charts/edgeless/operators/charts/node-maintenance-operator/templates/webhook-service.yaml",
        "charts/edgeless/operators/charts/node-maintenance-operator/values.schema.json",
        "charts/edgeless/operators/charts/node-maintenance-operator/values.yaml",
        "charts/edgeless/operators/values.yaml",
        "charts/edgeless/constellation-services/charts/ccm/templates/openstack-daemonset.yaml",
        "charts/edgeless/constellation-services/charts/ccm/templates/openstack-secret.yaml",
        "charts/edgeless/constellation-services/charts/yawol-controller/Chart.yaml",
        "charts/edgeless/constellation-services/charts/yawol-controller/README.md",
        "charts/edgeless/constellation-services/charts/yawol-controller/crds/yawol.stackit.cloud_loadbalancermachines.yaml",
        "charts/edgeless/constellation-services/charts/yawol-controller/crds/yawol.stackit.cloud_loadbalancers.yaml",
        "charts/edgeless/constellation-services/charts/yawol-controller/crds/yawol.stackit.cloud_loadbalancersets.yaml",
        "charts/edgeless/constellation-services/charts/yawol-controller/templates/_helpers.tpl",
        "charts/edgeless/constellation-services/charts/yawol-controller/templates/rbac-yawol-cloud-controller.yaml",
        "charts/edgeless/constellation-services/charts/yawol-controller/templates/rbac-yawol-controller.yaml",
        "charts/edgeless/constellation-services/charts/yawol-controller/templates/sa-yawol-cloud-controller.yaml",
        "charts/edgeless/constellation-services/charts/yawol-controller/templates/sa-yawol-controller.yaml",
        "charts/edgeless/constellation-services/charts/yawol-controller/templates/vpa.yaml",
        "charts/edgeless/constellation-services/charts/yawol-controller/templates/yawol-cloud-controller.yaml",
        "charts/edgeless/constellation-services/charts/yawol-controller/templates/yawol-controller.yaml",
        "charts/edgeless/constellation-services/charts/yawol-controller/templates/yawol-gardener-monitoring.yaml",
        "charts/edgeless/constellation-services/charts/yawol-controller/values.yaml",
        "charts/edgeless/constellation-services/charts/yawol-config/.helmignore",
        "charts/edgeless/constellation-services/charts/yawol-config/Chart.yaml",
        "charts/edgeless/constellation-services/charts/yawol-config/templates/secret.yaml",
        "charts/edgeless/constellation-services/charts/yawol-config/values.schema.json",
        "charts/edgeless/constellation-services/charts/yawol-config/values.yaml",
        "charts/edgeless/constellation-services/charts/cinder-config/.helmignore",
        "charts/edgeless/constellation-services/charts/cinder-config/Chart.yaml",
        "charts/edgeless/constellation-services/charts/cinder-config/templates/secret.yaml",
        "charts/edgeless/constellation-services/charts/cinder-config/values.schema.json",
        "charts/edgeless/constellation-services/charts/cinder-config/values.yaml",
        "charts/edgeless/constellation-services/charts/cinder-csi-plugin/Chart.yaml",
        "charts/edgeless/constellation-services/charts/cinder-csi-plugin/templates/_helpers.tpl",
        "charts/edgeless/constellation-services/charts/cinder-csi-plugin/templates/cinder-csi-driver.yaml",
        "charts/edgeless/constellation-services/charts/cinder-csi-plugin/templates/controllerplugin-deployment.yaml",
        "charts/edgeless/constellation-services/charts/cinder-csi-plugin/templates/controllerplugin-rbac.yaml",
        "charts/edgeless/constellation-services/charts/cinder-csi-plugin/templates/nodeplugin-daemonset.yaml",
        "charts/edgeless/constellation-services/charts/cinder-csi-plugin/templates/nodeplugin-rbac.yaml",
        "charts/edgeless/constellation-services/charts/cinder-csi-plugin/templates/storageclass.yaml",
        "charts/edgeless/constellation-services/charts/cinder-csi-plugin/values.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/CHANGELOG.md",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/Chart.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/NOTES.txt",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/_helpers.tpl",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/clusterrole-attacher.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/clusterrole-csi-node.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/clusterrole-provisioner.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/clusterrole-resizer.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/clusterrole-snapshotter.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/clusterrolebinding-attacher.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/clusterrolebinding-csi-node.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/clusterrolebinding-provisioner.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/clusterrolebinding-resizer.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/clusterrolebinding-snapshotter.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/controller.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/csidriver.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/metrics.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/node-windows.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/node.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/poddisruptionbudget-controller.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/serviceaccount-csi-controller.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/serviceaccount-csi-node.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/storageclass.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/storageclass_default.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/storageclass_integrity.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/templates/volumesnapshotclass.yaml",
        "charts/edgeless/constellation-services/charts/aws-csi-driver/values.yaml",
        "charts/.DS_Store",
        "charts/edgeless/.DS_Store",
        "charts/edgeless/constellation-services/.DS_Store",
        "charts/edgeless/constellation-services/charts/.DS_Store",
        "charts/aws-load-balancer-controller/.helmignore",
        "charts/aws-load-balancer-controller/Chart.yaml",
        "charts/aws-load-balancer-controller/README.md",
        "charts/aws-load-balancer-controller/ci/extra_args",
        "charts/aws-load-balancer-controller/ci/values.yaml",
        "charts/aws-load-balancer-controller/crds/crds.yaml",
        "charts/aws-load-balancer-controller/templates/NOTES.txt",
        "charts/aws-load-balancer-controller/templates/_helpers.tpl",
        "charts/aws-load-balancer-controller/templates/deployment.yaml",
        "charts/aws-load-balancer-controller/templates/ingressclass.yaml",
        "charts/aws-load-balancer-controller/templates/pdb.yaml",
        "charts/aws-load-balancer-controller/templates/rbac.yaml",
        "charts/aws-load-balancer-controller/templates/service.yaml",
        "charts/aws-load-balancer-controller/templates/serviceaccount.yaml",
        "charts/aws-load-balancer-controller/templates/servicemonitor.yaml",
        "charts/aws-load-balancer-controller/templates/webhook.yaml",
        "charts/aws-load-balancer-controller/values.yaml",
        "charts/aws-load-balancer-controller/crds/kustomization.yaml",
        "charts/aws-load-balancer-controller/test.yaml",
    ],
    importpath = "github.com/edgelesssys/constellation/v2/cli/internal/helm",
    visibility = ["//cli:__subpackages__"],
    deps = [
        "//cli/internal/clusterid",
        "//cli/internal/helm/imageversion",
        "//internal/cloud/cloudprovider",
        "//internal/compatibility",
        "//internal/config",
        "//internal/constants",
        "//internal/deploy/helm",
        "//internal/file",
        "//internal/kubernetes/kubectl",
        "//internal/logger",
        "//internal/retry",
        "//internal/semver",
        "//internal/versions",
        "@com_github_pkg_errors//:errors",
        "@com_github_spf13_afero//:afero",
        "@io_k8s_api//core/v1:core",
        "@io_k8s_apiextensions_apiserver//pkg/apis/apiextensions/v1:apiextensions",
        "@io_k8s_apimachinery//pkg/apis/meta/v1/unstructured",
        "@io_k8s_apimachinery//pkg/runtime/schema",
        "@io_k8s_apimachinery//pkg/util/wait",
        "@io_k8s_sigs_yaml//:yaml",
        "@org_uber_go_zap//:zap",
        "@sh_helm_helm//pkg/ignore",
        "@sh_helm_helm_v3//pkg/action",
        "@sh_helm_helm_v3//pkg/chart",
        "@sh_helm_helm_v3//pkg/chart/loader",
        "@sh_helm_helm_v3//pkg/chartutil",
        "@sh_helm_helm_v3//pkg/cli",
        "@sh_helm_helm_v3//pkg/release",
    ],
)

go_test(
    name = "helm_test",
    srcs = [
        "backup_test.go",
        "client_test.go",
        "loader_test.go",
    ],
    data = glob(["testdata/**"]),
    embed = [":helm"],
    deps = [
        "//cli/internal/clusterid",
        "//internal/attestation/idkeydigest",
        "//internal/attestation/measurements",
        "//internal/cloud/cloudprovider",
        "//internal/compatibility",
        "//internal/config",
        "//internal/deploy/helm",
        "//internal/file",
        "//internal/logger",
        "@com_github_pkg_errors//:errors",
        "@com_github_spf13_afero//:afero",
        "@com_github_stretchr_testify//assert",
        "@com_github_stretchr_testify//require",
        "@io_k8s_apiextensions_apiserver//pkg/apis/apiextensions/v1:apiextensions",
        "@io_k8s_apimachinery//pkg/apis/meta/v1/unstructured",
        "@io_k8s_apimachinery//pkg/runtime/schema",
        "@io_k8s_sigs_yaml//:yaml",
        "@sh_helm_helm_v3//pkg/chart",
        "@sh_helm_helm_v3//pkg/chart/loader",
        "@sh_helm_helm_v3//pkg/chartutil",
        "@sh_helm_helm_v3//pkg/engine",
        "@sh_helm_helm_v3//pkg/release",
    ],
)
