<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-2.23 docs-doc-page docs-doc-id-getting-started/examples/filestash-s3proxy" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Deploying Filestash | Constellation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.edgeless.systems/constellation/2.23/getting-started/examples/filestash-s3proxy"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.23"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.23"><meta data-rh="true" name="docsearch:version" content="2.23"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.23"><meta data-rh="true" property="og:title" content="Deploying Filestash | Constellation"><meta data-rh="true" name="description" content="Filestash is a web frontend for different storage backends, including S3."><meta data-rh="true" property="og:description" content="Filestash is a web frontend for different storage backends, including S3."><link data-rh="true" rel="icon" href="/constellation/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.edgeless.systems/constellation/2.23/getting-started/examples/filestash-s3proxy"><link data-rh="true" rel="alternate" href="https://docs.edgeless.systems/constellation/2.23/getting-started/examples/filestash-s3proxy" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.edgeless.systems/constellation/2.23/getting-started/examples/filestash-s3proxy" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Getting started","item":"https://docs.edgeless.systems/constellation/2.23/category/getting-started"},{"@type":"ListItem","position":2,"name":"Examples","item":"https://docs.edgeless.systems/constellation/2.23/getting-started/examples"},{"@type":"ListItem","position":3,"name":"Filestash with s3proxy","item":"https://docs.edgeless.systems/constellation/2.23/getting-started/examples/filestash-s3proxy"}]}</script><script src="/constellation/gtagman.js" async data-cookieconsent="ignore"></script><link rel="stylesheet" href="/constellation/assets/css/styles.9ca3c5b3.css">
<script src="/constellation/assets/js/runtime~main.87c4c513.js" defer="defer"></script>
<script src="/constellation/assets/js/main.add27954.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#E7E6E6" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">If you like Constellation, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/edgelesssys/constellation">GitHub</a> ⭐️</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/constellation/"><div class="navbar__logo"><img src="/constellation/img/logos/constellation_oneline.svg" alt="Constellation Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/constellation/img/logos/constellation_oneline.svg" alt="Constellation Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/constellation/2.23/getting-started/examples/filestash-s3proxy">2.23</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/constellation/next/getting-started/examples/filestash-s3proxy">Next</a></li><li><a class="dropdown__link" href="/constellation/getting-started/examples/filestash-s3proxy">2.24</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/constellation/2.23/getting-started/examples/filestash-s3proxy">2.23</a></li><li><a class="dropdown__link" href="/constellation/2.22/getting-started/examples/filestash-s3proxy">2.22</a></li></ul></div><a href="https://github.com/edgelesssys/constellation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-2.23"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/constellation/2.23/"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/constellation/2.23/category/basics"><span title="Basics" class="categoryLinkLabel_W154">Basics</span></a><button aria-label="Expand sidebar category &#x27;Basics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/constellation/2.23/category/getting-started"><span title="Getting started" class="categoryLinkLabel_W154">Getting started</span></a><button aria-label="Collapse sidebar category &#x27;Getting started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/constellation/2.23/getting-started/install"><span title="Installation" class="linkLabel_WmDU">Installation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/constellation/2.23/getting-started/first-steps"><span title="First steps (cloud)" class="linkLabel_WmDU">First steps (cloud)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/constellation/2.23/getting-started/first-steps-local"><span title="First steps (local)" class="linkLabel_WmDU">First steps (local)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/constellation/2.23/getting-started/marketplaces"><span title="Cloud Marketplaces" class="linkLabel_WmDU">Cloud Marketplaces</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/constellation/2.23/getting-started/examples"><span title="Examples" class="categoryLinkLabel_W154">Examples</span></a><button aria-label="Collapse sidebar category &#x27;Examples&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/constellation/2.23/getting-started/examples/emojivoto"><span title="Emojivoto" class="linkLabel_WmDU">Emojivoto</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/constellation/2.23/getting-started/examples/online-boutique"><span title="Online Boutique" class="linkLabel_WmDU">Online Boutique</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/constellation/2.23/getting-started/examples/horizontal-scaling"><span title="Horizontal Pod Autoscaling" class="linkLabel_WmDU">Horizontal Pod Autoscaling</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/constellation/2.23/getting-started/examples/filestash-s3proxy"><span title="Filestash with s3proxy" class="linkLabel_WmDU">Filestash with s3proxy</span></a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/constellation/2.23/category/workflows"><span title="Workflows" class="categoryLinkLabel_W154">Workflows</span></a><button aria-label="Expand sidebar category &#x27;Workflows&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/constellation/2.23/category/architecture"><span title="Architecture" class="categoryLinkLabel_W154">Architecture</span></a><button aria-label="Expand sidebar category &#x27;Architecture&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/constellation/2.23/category/reference"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Constellation<!-- --> <b>2.23</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/constellation/getting-started/examples/filestash-s3proxy">latest version</a></b> (<!-- -->2.24<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/constellation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/constellation/2.23/category/getting-started"><span>Getting started</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/constellation/2.23/getting-started/examples"><span>Examples</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Filestash with s3proxy</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.23</span><div class="theme-doc-markdown markdown"><header><h1>Deploying Filestash</h1></header>
<p>Filestash is a web frontend for different storage backends, including S3.
It&#x27;s a useful application to showcase s3proxy in action.</p>
<ol>
<li class="">Deploy s3proxy as described in <a class="" href="/constellation/2.23/workflows/s3proxy#deployment">Deployment</a>.</li>
<li class="">Create a deployment file for Filestash with one pod:</li>
</ol>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt; EOF &gt; &quot;deployment-filestash.yaml&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: filestash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            app: filestash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                app: filestash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          hostAliases:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - ip: $(kubectl get svc s3proxy-service -o=jsonpath=&#x27;{.spec.clusterIP}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            hostnames:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.us-east-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.us-east-2.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.us-west-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.us-west-2.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.eu-north-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.eu-south-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.eu-south-2.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.eu-west-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.eu-west-2.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.eu-west-3.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.eu-central-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.eu-central-2.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.ap-northeast-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.ap-northeast-2.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.ap-northeast-3.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.ap-east-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.ap-southeast-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.ap-southeast-2.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.ap-southeast-3.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.ap-southeast-4.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.ap-south-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.ap-south-2.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.me-south-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.me-central-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.il-central-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.af-south-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.ca-central-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;s3.sa-east-1.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - name: filestash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image: machines/filestash:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - containerPort: 8334</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            volumeMounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - name: ca-cert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              mountPath: /etc/ssl/certs/kube-ca.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              subPath: kube-ca.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - name: ca-cert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            secret:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              secretName: s3proxy-tls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              items:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              - key: ca.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                path: kube-ca.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<p>The pod spec includes the <code>hostAliases</code> key, which adds an entry to the pod&#x27;s <code>/etc/hosts</code>.
The entry forwards all requests for any of the currently defined AWS regions to the Kubernetes service <code>s3proxy-service</code>.
If you followed the s3proxy <a class="" href="/constellation/2.23/workflows/s3proxy#deployment">Deployment</a> guide, this service points to a s3proxy pod.</p>
<p>The deployment specifies all regions explicitly to prevent accidental data leaks.
If one of your buckets were located in a region that&#x27;s not part of the <code>hostAliases</code> key, traffic towards those buckets would not be redirected to s3proxy.
Similarly, if you want to exclude data for specific regions from going through s3proxy you can remove those regions from the deployment.</p>
<p>The spec also includes a volume mount for the TLS certificate and adds it to the pod&#x27;s certificate trust store.
The volume is called <code>ca-cert</code>.
The key <code>ca.crt</code> of that volume is mounted to <code>/etc/ssl/certs/kube-ca.crt</code>, which is the default certificate trust store location for that container&#x27;s OpenSSL library.
Not adding the CA certificate will result in TLS authentication errors.</p>
<ol start="3">
<li class="">Apply the file: <code>kubectl apply -f deployment-filestash.yaml</code></li>
</ol>
<p>Afterward, you can use a port forward to access the Filestash pod:
<code>kubectl port-forward pod/$(kubectl get pod --selector=&#x27;app=filestash&#x27; -o=jsonpath=&#x27;{.items[*].metadata.name}&#x27;) 8334:8334</code></p>
<ol start="4">
<li class="">
<p>After browsing to <code>localhost:8443</code>, Filestash will ask you to set an administrator password.
After setting it, you can directly leave the admin area by clicking the blue cloud symbol in the top left corner.
Subsequently, you can select S3 as storage backend and enter your credentials.
This will bring you to an overview of your buckets.
If you want to deploy Filestash in production, take a look at its <a href="https://www.filestash.app/docs/" target="_blank" rel="noopener noreferrer" class="">documentation</a>.</p>
</li>
<li class="">
<p>To see the logs of s3proxy intercepting requests made to S3, run: <code>kubectl logs -f pod/$(kubectl get pod --selector=&#x27;app=s3proxy&#x27; -o=jsonpath=&#x27;{.items[*].metadata.name}&#x27;)</code>
Look out for log messages labeled <code>intercepting</code>.
There is one such log message for each message that&#x27;s encrypted, decrypted, or blocked.</p>
</li>
<li class="">
<p>Once you have uploaded a file with Filestash, you should be able to view the file in Filestash.
However, if you go to the AWS S3 <a href="https://s3.console.aws.amazon.com/s3/home" target="_blank" rel="noopener noreferrer" class="">Web UI</a> and download the file you just uploaded in Filestash, you won&#x27;t be able to read it.
Another way to spot encrypted files without downloading them is to click on a file, scroll to the Metadata section, and look for the header named <code>x-amz-meta-constellation-encryption</code>.
This header holds the encrypted data encryption key of the object and is only present on objects that are encrypted by s3proxy.</p>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/edgelesssys/constellation/edit/main/docs/versioned_docs/version-2.23/getting-started/examples/filestash-s3proxy.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/constellation/2.23/getting-started/examples/horizontal-scaling"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Horizontal Pod Autoscaling</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/constellation/2.23/category/workflows"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Workflows</div></a></nav></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/constellation/overview/confidential-kubernetes">Confidential Kubernetes</a></li><li class="footer__item"><a class="footer__link-item" href="/constellation/getting-started/install">Install</a></li><li class="footer__item"><a class="footer__link-item" href="/constellation/getting-started/first-steps">First steps</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/edgelesssys/constellation" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.edgeless.systems/#footer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Newsletter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/EdgelessSystems" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/edgeless-systems/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCOOInN0sCv6icUesisYIDeA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/imprint/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.edgeless.systems/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="javascript: Cookiebot.renew()" class="footer__link-item">Cookie Settings</a></li><li class="footer__item"><a href="https://www.edgeless.systems/contact-us/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Edgeless Systems</div></div></div></footer></div>
</body>
</html>