"use strict";(globalThis.webpackChunkconstellation_docs=globalThis.webpackChunkconstellation_docs||[]).push([[3101],{28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>c});var i=n(96540);const o={},r=i.createContext(o);function s(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:t},e.children)}},45069:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"architecture/networking","title":"Network encryption","description":"Constellation encrypts all pod communication using the container network interface (CNI).","source":"@site/versioned_docs/version-2.23/architecture/networking.md","sourceDirName":"architecture","slug":"/architecture/networking","permalink":"/constellation/2.23/architecture/networking","draft":false,"unlisted":false,"editUrl":"https://github.com/edgelesssys/constellation/edit/main/docs/versioned_docs/version-2.23/architecture/networking.md","tags":[],"version":"2.23","frontMatter":{},"sidebar":"docs","previous":{"title":"Encrypted persistent storage","permalink":"/constellation/2.23/architecture/encrypted-storage"},"next":{"title":"Observability","permalink":"/constellation/2.23/architecture/observability"}}');var o=n(74848),r=n(28453);const s={},c="Network encryption",a={},d=[];function l(e){const t={a:"a",code:"code",em:"em",h1:"h1",header:"header",p:"p",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"network-encryption",children:"Network encryption"})}),"\n",(0,o.jsxs)(t.p,{children:["Constellation encrypts all pod communication using the ",(0,o.jsx)(t.a,{href:"https://github.com/containernetworking/cni",children:"container network interface (CNI)"}),".\nTo that end, Constellation deploys, configures, and operates the ",(0,o.jsx)(t.a,{href:"https://cilium.io/",children:"Cilium"})," CNI plugin.\nCilium provides ",(0,o.jsx)(t.a,{href:"https://docs.cilium.io/en/stable/security/network/encryption",children:"transparent encryption"})," for all cluster traffic using either IPSec or ",(0,o.jsx)(t.a,{href:"https://www.wireguard.com/",children:"WireGuard"}),".\nCurrently, Constellation only supports WireGuard as the encryption engine.\nYou can read more about the cryptographic soundness of WireGuard ",(0,o.jsx)(t.a,{href:"https://www.wireguard.com/papers/wireguard.pdf",children:"in their white paper"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["Cilium is actively working on implementing a feature called ",(0,o.jsx)(t.a,{href:"https://github.com/cilium/cilium/pull/19401",children:(0,o.jsx)(t.code,{children:"host-to-host"})})," encryption mode for WireGuard.\nWith ",(0,o.jsx)(t.code,{children:"host-to-host"}),", all traffic between nodes will be tunneled via WireGuard (host-to-host, host-to-pod, pod-to-host, pod-to-pod).\nUntil the ",(0,o.jsx)(t.code,{children:"host-to-host"})," feature is released, Constellation enables ",(0,o.jsx)(t.code,{children:"pod-to-pod"})," encryption.\nThis mode encrypts all traffic between Kubernetes pods using WireGuard tunnels."]}),"\n",(0,o.jsxs)(t.p,{children:["When using Cilium in the default setup but with encryption enabled, there is a ",(0,o.jsx)(t.a,{href:"https://docs.cilium.io/en/v1.12/gettingstarted/encryption/#egress-traffic-to-not-yet-discovered-remote-endpoints-may-be-unencrypted",children:"known issue"}),"\nthat can cause pod-to-pod traffic to be unencrypted.\nTo mitigate this issue, Constellation adds a ",(0,o.jsx)(t.em,{children:"strict"})," mode to Cilium's ",(0,o.jsx)(t.code,{children:"pod-to-pod"})," encryption.\nThis mode changes the default behavior of traffic that's destined for an unknown endpoint to not be send out in plaintext, but instead being dropped.\nThe strict mode distinguishes between traffic that's send to a pod from traffic that's destined for a cluster-external endpoint by considering the pod's CIDR range."]}),"\n",(0,o.jsxs)(t.p,{children:["Traffic originating from hosts isn't encrypted yet.\nThis mainly includes health checks from Kubernetes API server.\nAlso, traffic proxied over the API server via e.g. ",(0,o.jsx)(t.code,{children:"kubectl port-forward"})," isn't encrypted."]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}}}]);