"use strict";(globalThis.webpackChunkconstellation_docs=globalThis.webpackChunkconstellation_docs||[]).push([[9579],{28453:(e,r,t)=>{t.d(r,{R:()=>a,x:()=>i});var n=t(96540);const o={},s=n.createContext(o);function a(e){const r=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),n.createElement(s.Provider,{value:r},e.children)}},68212:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"reference/terraform","title":"Terraform usage","description":"Terraform is an Infrastructure as Code (IaC) framework to manage cloud resources. This page explains how Constellation uses it internally and how advanced users may manually use it to have more control over the resource creation.","source":"@site/versioned_docs/version-2.23/reference/terraform.md","sourceDirName":"reference","slug":"/reference/terraform","permalink":"/constellation/2.23/reference/terraform","draft":false,"unlisted":false,"editUrl":"https://github.com/edgelesssys/constellation/edit/main/docs/versioned_docs/version-2.23/reference/terraform.md","tags":[],"version":"2.23","frontMatter":{},"sidebar":"docs","previous":{"title":"Configuration migrations","permalink":"/constellation/2.23/reference/migration"},"next":{"title":"SLSA adoption","permalink":"/constellation/2.23/reference/slsa"}}');var o=t(74848),s=t(28453);const a={},i="Terraform usage",l={},c=[{value:"Terraform state files",id:"terraform-state-files",level:2},{value:"Interacting with Terraform manually",id:"interacting-with-terraform-manually",level:2},{value:"Terraform debugging",id:"terraform-debugging",level:2}];function d(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"terraform-usage",children:"Terraform usage"})}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.a,{href:"https://www.terraform.io/",children:"Terraform"})," is an Infrastructure as Code (IaC) framework to manage cloud resources. This page explains how Constellation uses it internally and how advanced users may manually use it to have more control over the resource creation."]}),"\n",(0,o.jsx)(r.admonition,{type:"info",children:(0,o.jsxs)(r.p,{children:["Information on this page is intended for users who are familiar with Terraform.\nIt's not required for common usage of Constellation.\nSee the ",(0,o.jsx)(r.a,{href:"https://developer.hashicorp.com/terraform/docs",children:"Terraform documentation"})," if you want to learn more about it."]})}),"\n",(0,o.jsx)(r.h2,{id:"terraform-state-files",children:"Terraform state files"}),"\n",(0,o.jsx)(r.p,{children:"Constellation keeps Terraform state files in subdirectories of the workspace together with the corresponding Terraform configuration files and metadata.\nThe subdirectories are created on the first Constellation CLI action that uses Terraform internally."}),"\n",(0,o.jsx)(r.p,{children:"Currently, these subdirectories are:"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"constellation-terraform"})," - Terraform state files for the resources of the Constellation cluster"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"constellation-iam-terraform"})," - Terraform state files for IAM configuration"]}),"\n"]}),"\n",(0,o.jsxs)(r.p,{children:["As with all commands, commands that work with these files (e.g., ",(0,o.jsx)(r.code,{children:"apply"}),", ",(0,o.jsx)(r.code,{children:"terminate"}),", ",(0,o.jsx)(r.code,{children:"iam"}),") have to be executed from the root of the cluster's ",(0,o.jsx)(r.a,{href:"/constellation/2.23/architecture/orchestration#workspaces",children:"workspace directory"}),". You usually don't need and shouldn't manipulate or delete the subdirectories manually."]}),"\n",(0,o.jsx)(r.h2,{id:"interacting-with-terraform-manually",children:"Interacting with Terraform manually"}),"\n",(0,o.jsxs)(r.p,{children:["Manual interaction with Terraform state created by Constellation (i.e., via the Terraform CLI) should only be performed by experienced users. It may lead to unrecoverable loss of cloud resources. For the majority of users and use cases, the interaction done by the ",(0,o.jsx)(r.a,{href:"/constellation/2.23/reference/cli",children:"Constellation CLI"})," is sufficient."]}),"\n",(0,o.jsx)(r.h2,{id:"terraform-debugging",children:"Terraform debugging"}),"\n",(0,o.jsxs)(r.p,{children:["To debug Terraform issues, the Constellation CLI offers the ",(0,o.jsx)(r.code,{children:"tf-log"})," flag. You can set it to any of ",(0,o.jsx)(r.a,{href:"https://developer.hashicorp.com/terraform/internals/debugging",children:"Terraform's log levels"}),":"]}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"JSON"})," (JSON-formatted logs at ",(0,o.jsx)(r.code,{children:"TRACE"})," level)"]}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.code,{children:"TRACE"})}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.code,{children:"DEBUG"})}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.code,{children:"INFO"})}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.code,{children:"WARN"})}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.code,{children:"ERROR"})}),"\n"]}),"\n",(0,o.jsxs)(r.p,{children:["The log output is written to the ",(0,o.jsx)(r.code,{children:"terraform.log"})," file in the workspace directory. The output is appended to the file on each run."]})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);