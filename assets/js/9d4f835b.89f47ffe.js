"use strict";(globalThis.webpackChunkconstellation_docs=globalThis.webpackChunkconstellation_docs||[]).push([[4672],{28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var i=n(96540);const s={},r=i.createContext(s);function o(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:t},e.children)}},59678:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"overview/confidential-kubernetes","title":"Confidential Kubernetes","description":"We use the term Confidential Kubernetes to refer to the concept of using confidential-computing technology to shield entire Kubernetes clusters from the infrastructure. The three defining properties of this concept are:","source":"@site/versioned_docs/version-2.23/overview/confidential-kubernetes.md","sourceDirName":"overview","slug":"/overview/confidential-kubernetes","permalink":"/constellation/2.23/overview/confidential-kubernetes","draft":false,"unlisted":false,"editUrl":"https://github.com/edgelesssys/constellation/edit/main/docs/versioned_docs/version-2.23/overview/confidential-kubernetes.md","tags":[],"version":"2.23","frontMatter":{},"sidebar":"docs","previous":{"title":"Basics","permalink":"/constellation/2.23/category/basics"},"next":{"title":"Security benefits","permalink":"/constellation/2.23/overview/security-benefits"}}');var s=n(74848),r=n(28453);const o={},a="Confidential Kubernetes",l={},c=[{value:"Constellation security features",id:"constellation-security-features",level:2},{value:"Comparison: Managed Kubernetes with CVMs",id:"comparison-managed-kubernetes-with-cvms",level:2}];function d(e){const t={a:"a",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"confidential-kubernetes",children:"Confidential Kubernetes"})}),"\n",(0,s.jsxs)(t.p,{children:["We use the term ",(0,s.jsx)(t.em,{children:"Confidential Kubernetes"})," to refer to the concept of using confidential-computing technology to shield entire Kubernetes clusters from the infrastructure. The three defining properties of this concept are:"]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Workload shielding"}),": the confidentiality and integrity of all workload-related data and code are enforced."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Control plane shielding"}),": the confidentiality and integrity of the cluster's control plane, state, and workload configuration are enforced."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Attestation and verifiability"}),": the two properties above can be verified remotely based on hardware-rooted cryptographic certificates."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Each of the above properties is equally important. Only with all three in conjunction, an entire cluster can be shielded without gaps."}),"\n",(0,s.jsx)(t.h2,{id:"constellation-security-features",children:"Constellation security features"}),"\n",(0,s.jsx)(t.p,{children:"Constellation implements the Confidential Kubernetes concept with the following security features."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Runtime encryption"}),": Constellation runs all Kubernetes nodes inside Confidential VMs (CVMs). This gives runtime encryption for the entire cluster."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Network and storage encryption"}),": Constellation augments this with transparent encryption of the ",(0,s.jsx)(t.a,{href:"/constellation/2.23/architecture/networking",children:"network"}),", ",(0,s.jsx)(t.a,{href:"/constellation/2.23/architecture/encrypted-storage",children:"persistent storage"}),", and other managed storage like ",(0,s.jsx)(t.a,{href:"/constellation/2.23/architecture/encrypted-storage#encrypted-s3-object-storage",children:"AWS S3"}),". Thus, workloads and control plane are truly end-to-end encrypted: at rest, in transit, and at runtime."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Transparent key management"}),": Constellation manages the corresponding ",(0,s.jsx)(t.a,{href:"/constellation/2.23/architecture/keys",children:"cryptographic keys"})," inside CVMs."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Node attestation and verification"}),": Constellation verifies the integrity of each new CVM-based node using ",(0,s.jsx)(t.a,{href:"/constellation/2.23/architecture/attestation",children:"remote attestation"}),'. Only "good" nodes receive the cryptographic keys required to access the network and storage of a cluster.']}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Confidential computing-optimized images"}),': A node is "good" if it\'s running a signed Constellation ',(0,s.jsx)(t.a,{href:"/constellation/2.23/architecture/images",children:"node image"})," inside a CVM and is in the expected state. (Node images are hardware-measured during boot. The measurements are reflected in the attestation statements that are produced by nodes and verified by Constellation.)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:'"Whole cluster" attestation'}),": Towards the DevOps engineer, Constellation provides a single hardware-rooted certificate from which all of the above can be verified."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["With the above, Constellation wraps an entire cluster into one coherent and verifiable ",(0,s.jsx)(t.em,{children:"confidential context"}),". The concept is depicted in the following."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Confidential Kubernetes",src:n(91988).A+"",width:"3767",height:"1902"})}),"\n",(0,s.jsx)(t.h2,{id:"comparison-managed-kubernetes-with-cvms",children:"Comparison: Managed Kubernetes with CVMs"}),"\n",(0,s.jsxs)(t.p,{children:["In comparison, managed Kubernetes with CVMs, as it's for example offered in ",(0,s.jsx)(t.a,{href:"https://azure.microsoft.com/en-us/services/kubernetes-service/",children:"AKS"})," and ",(0,s.jsx)(t.a,{href:"https://cloud.google.com/kubernetes-engine",children:"GKE"}),", only provides runtime encryption for certain worker nodes. Here, each worker node is a separate (and typically unverified) confidential context. This only provides limited security benefits as it only prevents direct access to a worker node's memory. The large majority of potential attacks through the infrastructure remain unaffected. This includes attacks through the control plane, access to external key management, and the corruption of worker node images. This leaves many problems unsolved. For instance, ",(0,s.jsx)(t.em,{children:"Node A"})," has no means to verify if ",(0,s.jsx)(t.em,{children:"Node B"}),' is "good" and if it\'s OK to share data with it. Consequently, this approach leaves a large attack surface, as is depicted in the following.']}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Concept: Managed Kubernetes plus CVMs",src:n(74030).A+"",width:"3767",height:"1902"})}),"\n",(0,s.jsx)(t.p,{children:"The following table highlights the key differences in terms of features."}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{}),(0,s.jsx)(t.th,{children:"Managed Kubernetes with CVMs"}),(0,s.jsx)(t.th,{children:"Confidential Kubernetes (Constellation\u2728)"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Runtime encryption"}),(0,s.jsx)(t.td,{children:"Partial (data plane only)"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Yes"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Node image verification"}),(0,s.jsx)(t.td,{children:"No"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Yes"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Full cluster attestation"}),(0,s.jsx)(t.td,{children:"No"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Yes"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Transparent network encryption"}),(0,s.jsx)(t.td,{children:"No"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Yes"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Transparent storage encryption"}),(0,s.jsx)(t.td,{children:"No"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Yes"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Confidential key management"}),(0,s.jsx)(t.td,{children:"No"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Yes"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Cloud agnostic / multi-cloud"}),(0,s.jsx)(t.td,{children:"No"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Yes"})})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},74030:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/concept-managed-33482ac199f949182872dc32d69bd3bc.svg"},91988:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/concept-constellation-f869032711a972295d5ddce42c37995c.svg"}}]);