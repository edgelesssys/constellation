"use strict";(globalThis.webpackChunkconstellation_docs=globalThis.webpackChunkconstellation_docs||[]).push([[832],{26640:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"workflows/sbom","title":"Consume software bill of materials (SBOMs)","description":"---","source":"@site/versioned_docs/version-2.23/workflows/sbom.md","sourceDirName":"workflows","slug":"/workflows/sbom","permalink":"/constellation/2.23/workflows/sbom","draft":false,"unlisted":false,"editUrl":"https://github.com/edgelesssys/constellation/edit/main/docs/versioned_docs/version-2.23/workflows/sbom.md","tags":[],"version":"2.23","frontMatter":{},"sidebar":"docs","previous":{"title":"Use the Terraform provider","permalink":"/constellation/2.23/workflows/terraform-provider"},"next":{"title":"Reproduce release artifacts","permalink":"/constellation/2.23/workflows/reproducible-builds"}}');var t=n(74848),i=n(28453);const r={},a="Consume software bill of materials (SBOMs)",l={},c=[{value:"Verify and download SBOMs",id:"verify-and-download-sboms",level:2},{value:"Constellation CLI",id:"constellation-cli",level:3},{value:"Container Images",id:"container-images",level:3},{value:"Vulnerability scanning",id:"vulnerability-scanning",level:2},{value:"Grype",id:"grype",level:3},{value:"Dependency Track",id:"dependency-track",level:3}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",...(0,i.R)(),...e.components},{AsciinemaWidget:n}=s;return n||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("AsciinemaWidget",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"consume-software-bill-of-materials-sboms",children:"Consume software bill of materials (SBOMs)"})}),"\n",(0,t.jsx)(n,{src:"/constellation/assets/check-sbom.cast",rows:"20",cols:"112",idleTimeLimit:"3",preload:"true",theme:"edgeless"}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.p,{children:["Constellation builds produce a ",(0,t.jsx)(s.a,{href:"https://www.ntia.gov/SBOM",children:"software bill of materials (SBOM)"})," for each generated ",(0,t.jsx)(s.a,{href:"/constellation/2.23/architecture/microservices",children:"artifact"}),".\nYou can use SBOMs to make informed decisions about dependencies and vulnerabilities in a given application. Enterprises rely on SBOMs to maintain an inventory of used applications, which allows them to take data-driven approaches to managing risks related to vulnerabilities."]}),"\n",(0,t.jsxs)(s.p,{children:["SBOMs for Constellation are generated using ",(0,t.jsx)(s.a,{href:"https://github.com/anchore/syft",children:"Syft"}),", signed using ",(0,t.jsx)(s.a,{href:"https://github.com/sigstore/cosign",children:"Cosign"}),", and stored with the produced artifact."]}),"\n",(0,t.jsxs)(s.admonition,{type:"note",children:[(0,t.jsx)(s.p,{children:"The public key for Edgeless Systems' long-term code-signing key is:"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEf8F1hpmwE+YCFXzjGtaQcrL6XZVT\nJmEe5iSLvG1SyQSAew7WdMKF6o9t8e2TFuCkzlOhhlws2OHWbiFZnFWCFw==\n-----END PUBLIC KEY-----\n"})}),(0,t.jsxs)(s.p,{children:["The public key is also available for download at ",(0,t.jsx)(s.a,{href:"https://edgeless.systems/es.pub",children:"https://edgeless.systems/es.pub"})," and in the Twitter profile ",(0,t.jsx)(s.a,{href:"https://twitter.com/EdgelessSystems",children:"@EdgelessSystems"}),"."]}),(0,t.jsxs)(s.p,{children:["Make sure the key is available in a file named ",(0,t.jsx)(s.code,{children:"cosign.pub"})," to execute the following examples."]})]}),"\n",(0,t.jsx)(s.h2,{id:"verify-and-download-sboms",children:"Verify and download SBOMs"}),"\n",(0,t.jsx)(s.p,{children:"The following sections detail how to work with each type of artifact to verify and extract the SBOM."}),"\n",(0,t.jsx)(s.h3,{id:"constellation-cli",children:"Constellation CLI"}),"\n",(0,t.jsxs)(s.p,{children:["The SBOM for Constellation CLI is made available on the ",(0,t.jsx)(s.a,{href:"https://github.com/edgelesssys/constellation/releases",children:"GitHub release page"}),". The SBOM (",(0,t.jsx)(s.code,{children:"constellation.spdx.sbom"}),") and corresponding signature (",(0,t.jsx)(s.code,{children:"constellation.spdx.sbom.sig"}),") are valid for each Constellation CLI for a given version, regardless of architecture and operating system."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"curl -LO https://github.com/edgelesssys/constellation/releases/download/v2.2.0/constellation.spdx.sbom\ncurl -LO https://github.com/edgelesssys/constellation/releases/download/v2.2.0/constellation.spdx.sbom.sig\ncosign verify-blob --key cosign.pub --signature constellation.spdx.sbom.sig constellation.spdx.sbom\n"})}),"\n",(0,t.jsx)(s.h3,{id:"container-images",children:"Container Images"}),"\n",(0,t.jsxs)(s.p,{children:["SBOMs for container images are ",(0,t.jsx)(s.a,{href:"https://docs.sigstore.dev/cosign/signing/other_types/#sboms-software-bill-of-materials",children:"attached to the image using Cosign"})," and uploaded to the same registry."]}),"\n",(0,t.jsx)(s.p,{children:"As a consumer, use cosign to download and verify the SBOM:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Verify and download the attestation statement\ncosign verify-attestation ghcr.io/edgelesssys/constellation/verification-service@v2.2.0 --type 'https://cyclonedx.org/bom' --key cosign.pub --output-file verification-service.att.json\n# Extract SBOM from attestation statement\njq -r .payload verification-service.att.json | base64 -d > verification-service.cyclonedx.sbom\n"})}),"\n",(0,t.jsx)(s.p,{children:"A successful verification should result in similar output:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:"$ cosign verify-attestation ghcr.io/edgelesssys/constellation/verification-service@v2.2.0 --type 'https://cyclonedx.org/bom' --key cosign.pub --output-file verification-service.sbom\n\nVerification for ghcr.io/edgelesssys/constellation/verification-service@v2.2.0 --\nThe following checks were performed on each of these signatures:\n  - The cosign claims were validated\n  - The signatures were verified against the specified public key\n$ jq -r .payload verification-service.sbom | base64 -d > verification-service.cyclonedx.sbom\n"})}),"\n",(0,t.jsx)(s.admonition,{type:"note",children:(0,t.jsxs)(s.p,{children:["This example considers only the ",(0,t.jsx)(s.code,{children:"verification-service"}),". The same approach works for all containers in the ",(0,t.jsx)(s.a,{href:"https://github.com/orgs/edgelesssys/packages?repo_name=constellation",children:"Constellation container registry"}),"."]})}),"\n",(0,t.jsx)(s.h2,{id:"vulnerability-scanning",children:"Vulnerability scanning"}),"\n",(0,t.jsxs)(s.p,{children:["You can use a plethora of tools to consume SBOMs. This section provides suggestions for tools that are popular and known to produce reliable results, but any tool that consumes ",(0,t.jsx)(s.a,{href:"https://spdx.dev/",children:"SPDX"})," or ",(0,t.jsx)(s.a,{href:"https://cyclonedx.org/",children:"CycloneDX"})," files should work."]}),"\n",(0,t.jsxs)(s.p,{children:["Syft is able to ",(0,t.jsx)(s.a,{href:"https://github.com/anchore/syft#format-conversion-experimental",children:"convert between the two formats"})," in case you require a specific type."]}),"\n",(0,t.jsx)(s.h3,{id:"grype",children:"Grype"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"https://github.com/anchore/grype",children:"Grype"})," is a CLI tool that lends itself well for integration into CI/CD systems or local developer machines. It's also able to consume the signed attestation statement directly and does the verification in one go."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"grype att:verification-service.sbom --key cosign.pub --add-cpes-if-none -q\n"})}),"\n",(0,t.jsx)(s.h3,{id:"dependency-track",children:"Dependency Track"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"https://dependencytrack.org/",children:"Dependency Track"})," is one of the oldest and most mature solutions when it comes to managing software inventory and vulnerabilities. Once imported, it continuously scans SBOMs for new vulnerabilities. It supports the CycloneDX format and provides direct guidance on how to comply with ",(0,t.jsx)(s.a,{href:"https://docs.dependencytrack.org/usage/executive-order-14028/",children:"U.S. Executive Order 14028"}),"."]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>a});var o=n(96540);const t={},i=o.createContext(t);function r(e){const s=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(i.Provider,{value:s},e.children)}}}]);