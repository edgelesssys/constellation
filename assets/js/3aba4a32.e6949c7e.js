"use strict";(globalThis.webpackChunkconstellation_docs=globalThis.webpackChunkconstellation_docs||[]).push([[1902],{28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>a});var s=n(96540);const r={},o=s.createContext(r);function i(e){const t=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:t},e.children)}},88892:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"overview/clouds","title":"Feature status of clouds","description":"What works on which cloud? Currently, Confidential VMs (CVMs) are available in varying quality on the different clouds and software stacks.","source":"@site/versioned_docs/version-2.22/overview/clouds.md","sourceDirName":"overview","slug":"/overview/clouds","permalink":"/constellation/2.22/overview/clouds","draft":false,"unlisted":false,"editUrl":"https://github.com/edgelesssys/constellation/edit/main/docs/versioned_docs/version-2.22/overview/clouds.md","tags":[],"version":"2.22","frontMatter":{},"sidebar":"docs","previous":{"title":"Product features","permalink":"/constellation/2.22/overview/product"},"next":{"title":"Performance analysis of Constellation","permalink":"/constellation/2.22/overview/performance/"}}');var r=n(74848),o=n(28453);const i={},a="Feature status of clouds",l={},d=[{value:"Amazon Web Services (AWS)",id:"amazon-web-services-aws",level:2},{value:"Microsoft Azure",id:"microsoft-azure",level:2},{value:"Google Cloud Platform (GCP)",id:"google-cloud-platform-gcp",level:2},{value:"STACKIT",id:"stackit",level:2},{value:"OpenStack",id:"openstack",level:2},{value:"Conclusion",id:"conclusion",level:2}];function c(e){const t={a:"a",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"feature-status-of-clouds",children:"Feature status of clouds"})}),"\n",(0,r.jsx)(t.p,{children:"What works on which cloud? Currently, Confidential VMs (CVMs) are available in varying quality on the different clouds and software stacks."}),"\n",(0,r.jsx)(t.p,{children:"For Constellation, the ideal environment provides the following:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Ability to run arbitrary software and images inside CVMs"}),"\n",(0,r.jsx)(t.li,{children:"CVMs based on AMD SEV-SNP (available in EPYC CPUs since the Milan generation) or Intel TDX (available in Xeon CPUs since the Sapphire Rapids generation)"}),"\n",(0,r.jsx)(t.li,{children:"Ability for CVM guests to obtain raw hardware attestation statements"}),"\n",(0,r.jsx)(t.li,{children:"Reviewable, open-source firmware inside CVMs"}),"\n",(0,r.jsx)(t.li,{children:"Capability of the firmware to attest the integrity of the code it passes control to, e.g., with an embedded virtual TPM (vTPM)"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"(1) is a functional must-have. (2)--(5) are required for remote attestation that fully keeps the infrastructure/cloud out. Constellation can work without them or with approximations, but won't protect against certain privileged attackers anymore."}),"\n",(0,r.jsx)(t.p,{children:"The following table summarizes the state of features for different infrastructures."}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:(0,r.jsx)(t.strong,{children:"Feature"})}),(0,r.jsx)(t.th,{children:(0,r.jsx)(t.strong,{children:"AWS"})}),(0,r.jsx)(t.th,{children:(0,r.jsx)(t.strong,{children:"Azure"})}),(0,r.jsx)(t.th,{children:(0,r.jsx)(t.strong,{children:"GCP"})}),(0,r.jsx)(t.th,{children:(0,r.jsx)(t.strong,{children:"STACKIT"})}),(0,r.jsx)(t.th,{children:(0,r.jsx)(t.strong,{children:"OpenStack (Yoga)"})})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"1. Custom images"})}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"Yes"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"2. SEV-SNP or TDX"})}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"No"}),(0,r.jsx)(t.td,{children:"Depends on kernel/HV"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"3. Raw guest attestation"})}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"No"}),(0,r.jsx)(t.td,{children:"Depends on kernel/HV"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"4. Reviewable firmware"})}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"No*"}),(0,r.jsx)(t.td,{children:"No"}),(0,r.jsx)(t.td,{children:"No"}),(0,r.jsx)(t.td,{children:"Depends on kernel/HV"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"5. Confidential measured boot"})}),(0,r.jsx)(t.td,{children:"No"}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"No"}),(0,r.jsx)(t.td,{children:"No"}),(0,r.jsx)(t.td,{children:"Depends on kernel/HV"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"amazon-web-services-aws",children:"Amazon Web Services (AWS)"}),"\n",(0,r.jsxs)(t.p,{children:["Amazon EC2 ",(0,r.jsx)(t.a,{href:"https://aws.amazon.com/de/about-aws/whats-new/2023/04/amazon-ec2-amd-sev-snp/",children:"supports AMD SEV-SNP"}),".\nRegarding (3), AWS provides direct access to attestation statements.\nHowever, regarding (5), attestation is partially based on the ",(0,r.jsx)(t.a,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/nitrotpm.html",children:"NitroTPM"})," for ",(0,r.jsx)(t.a,{href:"/constellation/2.22/architecture/attestation#measured-boot",children:"measured boot"}),", which is a vTPM managed by the Nitro hypervisor.\nHence, the hypervisor is currently part of Constellation's TCB.\nRegarding (4), the ",(0,r.jsx)(t.a,{href:"https://github.com/aws/uefi",children:"firmware is open source"})," and can be reproducibly built."]}),"\n",(0,r.jsx)(t.h2,{id:"microsoft-azure",children:"Microsoft Azure"}),"\n",(0,r.jsxs)(t.p,{children:["With its ",(0,r.jsx)(t.a,{href:"https://docs.microsoft.com/en-us/azure/confidential-computing/confidential-vm-overview",children:"CVM offering"}),", Azure provides the best foundations for Constellation.\nRegarding (3), Azure provides direct access to attestation statements.\nThe firmware runs in an isolated domain inside the CVM and exposes a vTPM (5), but it's closed source (4).\nOn SEV-SNP, Azure uses VM Privilege Level (VMPL) isolation for the separation of firmware and the rest of the VM; on TDX, they use TD partitioning.\nThis firmware is signed by Azure.\nThe signature is reflected in the attestation statements of CVMs.\nThus, the Azure closed-source firmware becomes part of Constellation's trusted computing base (TCB)."]}),"\n",(0,r.jsxs)(t.p,{children:["* Recently, ",(0,r.jsx)(t.a,{href:"https://techcommunity.microsoft.com/blog/windowsosplatform/openhcl-the-new-open-source-paravisor/4273172",children:"Azure announced the open source paravisor OpenHCL"}),". It's the foundation for fully open source and verifiable CVM firmware. Once Azure provides their CVM firmware with reproducible builds based on OpenHCL, (4) switches from ",(0,r.jsx)(t.em,{children:"No"})," to ",(0,r.jsx)(t.em,{children:"Yes"}),". Constellation will support OpenHCL based firmware on Azure in the future."]}),"\n",(0,r.jsx)(t.h2,{id:"google-cloud-platform-gcp",children:"Google Cloud Platform (GCP)"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.a,{href:"https://cloud.google.com/confidential-computing/confidential-vm/docs/confidential-vm-overview#technologies",children:"CVMs Generally Available in GCP"})," are based on AMD SEV-ES or SEV-SNP.\nRegarding (3), with their SEV-SNP offering Google provides direct access to attestation statements.\nHowever, regarding (5), attestation is partially based on the ",(0,r.jsx)(t.a,{href:"https://cloud.google.com/compute/shielded-vm/docs/shielded-vm#vtpm",children:"Shielded VM vTPM"})," for ",(0,r.jsx)(t.a,{href:"/constellation/2.22/architecture/attestation#measured-boot",children:"measured boot"}),", which is a vTPM managed by Google's hypervisor.\nHence, the hypervisor is currently part of Constellation's TCB.\nRegarding (4), the CVMs still include closed-source firmware."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://cloud.google.com/blog/products/identity-security/confidential-vms-on-intel-cpus-your-datas-new-intelligent-defense",children:"TDX on Google"})," is in public preview.\nWith it, Constellation would have a similar TCB and attestation flow as with the current SEV-SNP offering."]}),"\n",(0,r.jsx)(t.h2,{id:"stackit",children:"STACKIT"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://www.stackit.de/en/product/stackit-compute-engine/",children:"STACKIT Compute Engine"})," supports AMD SEV-ES. A vTPM is used for measured boot, which is a vTPM managed by STACKIT's hypervisor. Hence, the hypervisor is currently part of Constellation's TCB."]}),"\n",(0,r.jsx)(t.h2,{id:"openstack",children:"OpenStack"}),"\n",(0,r.jsxs)(t.p,{children:["OpenStack is an open-source cloud and infrastructure management software. It's used by many smaller CSPs and datacenters. In the latest ",(0,r.jsx)(t.em,{children:"Yoga"})," version, OpenStack has basic support for CVMs. However, much depends on the employed kernel and hypervisor. Features (2)--(4) are likely to be a ",(0,r.jsx)(t.em,{children:"Yes"})," with Linux kernel version 6.2. Thus, going forward, OpenStack on corresponding AMD or Intel hardware will be a viable underpinning for Constellation."]}),"\n",(0,r.jsx)(t.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsx)(t.p,{children:"The different clouds and software like the Linux kernel and OpenStack are in the process of building out their support for state-of-the-art CVMs. Azure has already most features in place. For Constellation, the status quo means that the TCB has different shapes on different infrastructures. With broad SEV-SNP support coming to the Linux kernel, we soon expect a normalization of features across infrastructures."})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);