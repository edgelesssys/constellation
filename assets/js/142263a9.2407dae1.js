"use strict";(globalThis.webpackChunkconstellation_docs=globalThis.webpackChunkconstellation_docs||[]).push([[3531],{2135:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"workflows/terminate","title":"Terminate your cluster","description":"This recording presents the essence of this page. It\'s recommended to read it in full for the motivation and all details.","source":"@site/versioned_docs/version-2.23/workflows/terminate.md","sourceDirName":"workflows","slug":"/workflows/terminate","permalink":"/constellation/2.23/workflows/terminate","draft":false,"unlisted":false,"editUrl":"https://github.com/edgelesssys/constellation/edit/main/docs/versioned_docs/version-2.23/workflows/terminate.md","tags":[],"version":"2.23","frontMatter":{},"sidebar":"docs","previous":{"title":"Install s3proxy","permalink":"/constellation/2.23/workflows/s3proxy"},"next":{"title":"Recover your cluster","permalink":"/constellation/2.23/workflows/recovery"}}');var o=n(74848),s=n(28453);const a={},i="Terminate your cluster",l={},c=[];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",hr:"hr",p:"p",pre:"pre",...(0,s.R)(),...e.components},{AsciinemaWidget:n,TabItem:r,Tabs:a}=t;return n||u("AsciinemaWidget",!0),r||u("TabItem",!0),a||u("Tabs",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"terminate-your-cluster",children:"Terminate your cluster"})}),"\n",(0,o.jsx)(t.admonition,{type:"info",children:(0,o.jsx)(t.p,{children:"This recording presents the essence of this page. It's recommended to read it in full for the motivation and all details."})}),"\n",(0,o.jsx)(n,{src:"/constellation/assets/terminate-cluster.cast",rows:"20",cols:"112",idleTimeLimit:"3",preload:"true",theme:"edgeless"}),"\n",(0,o.jsx)(t.hr,{}),"\n",(0,o.jsxs)(t.p,{children:["You can terminate your cluster using the CLI. For this, you need the Terraform state directory named ",(0,o.jsx)(t.a,{href:"/constellation/2.23/reference/terraform",children:(0,o.jsx)(t.code,{children:"constellation-terraform"})})," in the current directory."]}),"\n",(0,o.jsx)(t.admonition,{type:"danger",children:(0,o.jsx)(t.p,{children:"All ephemeral storage and state of your cluster will be lost. Make sure any data is safely stored in persistent storage. Constellation can recreate your cluster and the associated encryption keys, but won't  backup your application data automatically."})}),"\n",(0,o.jsxs)(a,{groupId:"provider",children:[(0,o.jsxs)(r,{value:"cli",label:"CLI",children:[(0,o.jsx)(t.p,{children:"Terminate the cluster by running:"}),(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"constellation terminate\n"})}),(0,o.jsx)(t.p,{children:"Or without confirmation (e.g., for automation purposes):"}),(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"constellation terminate --yes\n"})}),(0,o.jsxs)(t.p,{children:["This deletes all resources created by Constellation in your cloud environment.\nAll local files created by the ",(0,o.jsx)(t.code,{children:"apply"})," command are deleted as well, except for ",(0,o.jsx)(t.code,{children:"constellation-mastersecret.json"})," and the configuration file."]}),(0,o.jsx)(t.admonition,{type:"caution",children:(0,o.jsxs)(t.p,{children:["Termination can fail if additional resources have been created that depend on the ones managed by Constellation. In this case, you need to delete these additional\nresources manually. Just run the ",(0,o.jsx)(t.code,{children:"terminate"})," command again afterward to continue the termination process of the cluster."]})})]}),(0,o.jsxs)(r,{value:"terraform",label:"Terraform",children:[(0,o.jsx)(t.p,{children:"Terminate the cluster by running:"}),(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"terraform destroy\n"})}),(0,o.jsx)(t.p,{children:"Delete all files that are no longer needed:"}),(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"rm constellation-state.yaml constellation-admin.conf\n"})}),(0,o.jsxs)(t.p,{children:["Only the ",(0,o.jsx)(t.code,{children:"constellation-mastersecret.json"})," and the configuration file remain."]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}function u(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var r=n(96540);const o={},s=r.createContext(o);function a(e){const t=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);